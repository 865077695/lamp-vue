webpackJsonp([10],{Xcdv:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e("SwQL"),l=e("G0Ko"),i=e("CIu9"),r=e("UMie"),s=e("7EUm"),c=e("pP4B"),d={name:"BroadcastPlan",components:{MyForm:l.a,MyPage:i.a},data:function(){var t=this;return{tableLoading:!1,addModal:!1,adding:!1,planListSearchItem:s.r,addPlanItem:s.h,addPlanFormRule:s.g,totalPage:null,addText:"新增",planSearchParams:{name:null,currentPage:1,startDate:null,endDate:null,playBegin:null,playEnd:null,typ:null,iscycle:null,status:null},addPlanData:{name:null,startDate:null,endDate:null,playBegin:null,playEnd:null,typ:null,iscycle:null,status:null},planList:[],columns:[{title:"计划id",key:"id",width:80},{title:"计划名称",key:"name",width:150},{title:"开始日期",key:"startDate",width:190},{title:"结束日期",key:"endDate",width:190},{title:"开始时间",key:"playBegin",width:120},{title:"结束时间",key:"playEnd",width:120},{title:"状态",key:"status",width:70,render:function(t,a){return Object(n.c)(a.row.status,r.c.status)}},{title:"循环",key:"iscycle",width:70,render:function(t,a){return Object(n.c)(a.row.iscycle,r.c.iscycle)}},{title:"播报类型",key:"typ",width:90,render:function(t,a){return Object(n.c)(a.row.typ,r.c.resourceType)}},{title:"修改时间",key:"modifyTime",width:170},{title:"描述",key:"notes",width:200},{title:"操作",key:"action",fixed:"right",width:140,render:function(a,e){return a("div",[a("Button",{props:{type:"primary",size:"small"},on:{click:function(){t.$router.push({path:"/plan-info",query:{id:e.row.id}})}}},"编辑"),a("Poptip",{props:{confirm:!0,title:"您确定要删除这条数据吗?",transfer:!0},on:{"on-ok":function(){t.deletePlan(e.row.id)}}},[a("Button",{style:{margin:"0 10px"},props:{type:"error",placement:"top",size:"small"}},"删除")])])}}]}},activated:function(){this.getplanList()},created:function(){this.getplanList()},methods:{doValida:function(t){this.$refs[t].handleValida()},searchOk:function(){this.planSearchParams.startDate&&(this.planSearchParams.startDate=Object(n.a)(this.planSearchParams.startDate)),this.planSearchParams.endDate&&(this.planSearchParams.endDate=Object(n.a)(this.planSearchParams.endDate)),this.planSearchParams.currentPage=1,this.getplanList()},add:function(){this.$router.push({path:"/add-plan",query:{id:null}})},pageChange:function(){this.getplanList()},getplanList:function(){var t=this;this.tableLoading=!0,Object(c.a)({url:"/plan/list",method:"POST",data:this.planSearchParams}).then(function(a){t.tableLoading=!1,200===a.code&&(t.planList=a.data.content,t.totalPage=a.data.totalPage)})},deletePlan:function(t){var a=this;Object(c.a)({url:"plan/delete",method:"POST",data:{id:t}}).then(function(t){200===t.code&&(a.$Message.success("删除成功"),a.getplanList())})}}},o={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[t._v("\n  街道："+t._s(t.$route.query.id)+"\n  "),t._v(" "),e("div",{staticClass:"search"},[e("my-form",{ref:"searchForm",staticClass:"searchForm",attrs:{formItems:t.planListSearchItem,formData:t.planSearchParams},on:{validaok:t.searchOk}}),t._v(" "),e("Button",{staticStyle:{height:"32px"},attrs:{type:"primary"},on:{click:function(a){t.doValida("searchForm")}}},[t._v("搜索")]),t._v(" "),e("Button",{staticStyle:{height:"32px","margin-left":"10px"},attrs:{type:"success"},on:{click:t.add}},[t._v("添加")])],1),t._v(" "),e("Table",{staticClass:"table",attrs:{loading:t.tableLoading,border:"",columns:t.columns,data:t.planList}}),t._v(" "),e("my-page",{attrs:{_totalPage:t.totalPage,_currentPage:t.planSearchParams.currentPage},on:{pageChange:t.pageChange,"update:_currentPage":function(a){t.$set(t.planSearchParams,"currentPage",a)}}})],1)},staticRenderFns:[]};var u=e("VU/8")(d,o,!1,function(t){e("qyK8")},"data-v-50c941cb",null);a.default=u.exports},qyK8:function(t,a){}});