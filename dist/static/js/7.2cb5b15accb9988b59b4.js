webpackJsonp([7],{"862M":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("pP4B"),n={name:"StreetEdit",data:function(){return{streetInfo:null,address:null,map:null}},methods:{submit:function(){var t=this,e={id:this.streetInfo.id,name:this.streetInfo.name,heartbeat:this.streetInfo.heartbeat,latitude:this.streetInfo.latitude,longitude:this.streetInfo.longitude,reporttime:this.streetInfo.reporttime,typ:this.streetInfo.typ,power:this.streetInfo.power};Object(a.a)({url:"street/streetsEdit",method:"POST",data:e}).then(function(e){200===e.code&&t.$router.push({path:"/lamp/street-admin"})})},timeChange:function(t){this.streetInfo.reporttime=t},search:function(){this.setPlace(this.address)},setPlace:function(t){var e=this,s=null,a=null,n=null;(s=new BMap.LocalSearch(this.map,{onSearchComplete:function(){void 0!=s.getResults()?(e.map.clearOverlays(),s.getResults().getPoi(0)?(a=s.getResults().getPoi(0).point,e.map.centerAndZoom(a,18),n=new BMap.Marker(a),e.map.addOverlay(n),n.enableDragging(),e.$Message.success("查找成功！")):e.$Message.error("未匹配到地点!可拖动地图上的红色图标到精确位置")):e.$Message.error("未找到搜索结果")}})).search(t)}},mounted:function(){var t=this;this.map=new BMap.Map("allmap"),this.map.centerAndZoom(new BMap.Point(this.streetInfo.longitude||116.404,this.streetInfo.latitude||39.915),20),this.map.enableScrollWheelZoom(!0),this.map.addEventListener("click",function(e){t.streetInfo.longitude=e.point.lng,t.streetInfo.latitude=e.point.lat})},created:function(){this.streetInfo=this.$route.query}},i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"street-edit"},[s("div",{staticClass:"item"},[s("div",{attrs:{id:"allmap"}}),t._v(" "),s("Input",{staticStyle:{width:"300px"},attrs:{id:"address-search",placeholder:"输入地址"},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.search(e)}},model:{value:t.address,callback:function(e){t.address=e},expression:"address"}},[s("Button",{attrs:{slot:"append",icon:"ios-search"},on:{click:t.search},slot:"append"})],1)],1),t._v(" "),s("div",{staticClass:"item"},[s("div",{staticClass:"label"},[t._v("街道名称：")]),t._v(" "),s("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"街道名称"},model:{value:t.streetInfo.name,callback:function(e){t.$set(t.streetInfo,"name",e)},expression:"streetInfo.name"}}),s("br")],1),t._v(" "),s("div",{staticClass:"item"},[s("div",{staticClass:"label"},[t._v("心跳间隔：")]),t._v(" "),s("Input",{staticStyle:{width:"100px"},attrs:{placeholder:"心跳间隔"},model:{value:t.streetInfo.heartbeat,callback:function(e){t.$set(t.streetInfo,"heartbeat",e)},expression:"streetInfo.heartbeat"}}),t._v("（秒）\n  ")],1),t._v(" "),s("div",{staticClass:"item"},[s("div",{staticClass:"label"},[t._v("能耗上报时间：")]),t._v(" "),s("TimePicker",{staticStyle:{width:"100px"},attrs:{value:t.streetInfo.reporttime,placeholder:"Select time",format:"HH:mm:ss"},on:{"on-change":t.timeChange}}),t._v("（时：分：秒）\n  ")],1),t._v(" "),s("div",{staticClass:"item"},[s("div",{staticClass:"label"},[t._v("定损功率：")]),t._v(" "),s("Input",{staticStyle:{width:"100px"},attrs:{placeholder:"定损功率"},model:{value:t.streetInfo.power,callback:function(e){t.$set(t.streetInfo,"power",e)},expression:"streetInfo.power"}}),t._v("（瓦）\n  ")],1),t._v(" "),s("div",{staticClass:"item"},[s("Tooltip",{attrs:{content:"点击地图选择街道中心点",placement:"right"}},[s("div",{staticClass:"label"},[s("label",[t._v("经纬度：")])])]),s("br"),t._v("\n    经度："),s("Input",{staticStyle:{width:"100px"},attrs:{placeholder:"经度"},model:{value:t.streetInfo.longitude,callback:function(e){t.$set(t.streetInfo,"longitude",e)},expression:"streetInfo.longitude"}}),t._v("\n     纬度："),s("Input",{staticStyle:{width:"100px"},attrs:{placeholder:"纬度"},model:{value:t.streetInfo.latitude,callback:function(e){t.$set(t.streetInfo,"latitude",e)},expression:"streetInfo.latitude"}})],1),t._v(" "),s("div",{staticClass:"item"},[s("Button",{staticStyle:{width:"100px"},attrs:{type:"primary"},on:{click:t.submit}},[t._v("提交")])],1)])},staticRenderFns:[]};var r=s("VU/8")(n,i,!1,function(t){s("mkf1")},"data-v-c98fac12",null);e.default=r.exports},mkf1:function(t,e){}});